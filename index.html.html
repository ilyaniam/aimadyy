<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ukur Cinta - Afi untuk Ilyan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', 'Segoe UI', -apple-system, sans-serif;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #1f2937;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(236, 72, 153, 0.08);
            overflow: hidden;
            border: 1px solid #fce7f3;
        }
        
        .header {
            text-align: center;
            padding: 40px 30px 30px;
            background: linear-gradient(to right, #ec4899, #f472b6);
            color: white;
            position: relative;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: white;
            transform: rotate(45deg);
            border-radius: 6px;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
            letter-spacing: -0.5px;
            margin-bottom: 8px;
            font-family: 'Playfair Display', serif;
        }
        
        .subtitle {
            font-size: 15px;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .heart-icon {
            display: inline-block;
            margin: 0 10px;
            animation: gentleFloat 3s ease-in-out infinite;
        }
        
        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .camera-container {
            padding: 50px 30px 40px;
            text-align: center;
        }
        
        .video-wrapper {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            border-radius: 50%;
            overflow: hidden;
            border: 8px solid #fdf2f8;
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.1);
            position: relative;
        }
        
        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: inset 0 0 0 2px rgba(236, 72, 153, 0.1);
            pointer-events: none;
        }
        
        .camera-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #9ca3af;
            font-size: 14px;
        }
        
        .camera-placeholder svg {
            width: 48px;
            height: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }
        
        .capture-btn {
            background: linear-gradient(to right, #ec4899, #f472b6);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            letter-spacing: 0.5px;
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.25);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .capture-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.3);
        }
        
        .capture-btn:active {
            transform: translateY(0);
        }
        
        .capture-btn svg {
            width: 20px;
            height: 20px;
        }
        
        .result-container {
            display: none;
            padding: 40px 30px;
            text-align: center;
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-title {
            font-size: 20px;
            font-weight: 500;
            color: #1f2937;
            margin-bottom: 30px;
            letter-spacing: -0.3px;
        }
        
        .photo-frame {
            width: 160px;
            height: 160px;
            margin: 0 auto 30px;
            border-radius: 50%;
            overflow: hidden;
            border: 6px solid white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }
        
        #photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .score-container {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .score-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, #ec4899, #f472b6);
        }
        
        .love-score {
            font-size: 56px;
            font-weight: 700;
            background: linear-gradient(to right, #ec4899, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 10px 0;
            font-family: 'Playfair Display', serif;
            letter-spacing: -1px;
        }
        
        .score-label {
            font-size: 14px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }
        
        .love-message {
            font-size: 16px;
            color: #4b5563;
            line-height: 1.6;
            margin: 25px 0;
            font-weight: 400;
            padding: 0 10px;
        }
        
        .restart-btn {
            background: transparent;
            color: #ec4899;
            border: 2px solid #fce7f3;
            padding: 12px 32px;
            font-size: 14px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            margin-top: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .restart-btn:hover {
            background: #fdf2f8;
            border-color: #f472b6;
        }
        
        .restart-btn svg {
            width: 16px;
            height: 16px;
        }
        
        .canvas {
            display: none;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #9ca3af;
            font-size: 12px;
            border-top: 1px solid #f3f4f6;
        }
        
        @media (max-width: 480px) {
            .container {
                border-radius: 20px;
            }
            
            .header {
                padding: 30px 20px 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .video-wrapper {
                width: 180px;
                height: 180px;
            }
            
            .love-score {
                font-size: 48px;
            }
            
            .camera-container {
                padding: 40px 20px 30px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ukur Cinta
                <span class="heart-icon">❤</span>
            </h1>
            <p class="subtitle">Afi untuk Ilyan</p>
        </div>
        
        <div class="camera-container" id="cameraContainer">
            <div class="video-wrapper">
                <div class="camera-placeholder" id="cameraPlaceholder">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span>Kamera siap</span>
                </div>
                <video id="video" autoplay playsinline></video>
                <div class="video-overlay"></div>
            </div>
            
            <button class="capture-btn" id="captureBtn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Ukur Cinta
            </button>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2 class="result-title">Hasil Pengukuran</h2>
            
            <div class="photo-frame">
                <img id="photo" src="" alt="Foto Afi">
            </div>
            
            <div class="score-container">
                <div class="score-label">Tingkat Cinta</div>
                <div class="love-score" id="loveScore">100%</div>
                <div class="love-message" id="loveMessage">
                    Cinta yang terukur dengan angka yang luar biasa
                </div>
            </div>
            
            <button class="restart-btn" id="restartBtn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                Ukur Lagi
            </button>
        </div>
        
        <div class="footer">
            Untuk Afi & Ilyan
        </div>
    </div>

    <canvas id="canvas" class="canvas"></canvas>

    <script>
        // Elemen DOM
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const captureBtn = document.getElementById('captureBtn');
        const resultContainer = document.getElementById('resultContainer');
        const cameraContainer = document.getElementById('cameraContainer');
        const photo = document.getElementById('photo');
        const loveScore = document.getElementById('loveScore');
        const loveMessage = document.getElementById('loveMessage');
        const restartBtn = document.getElementById('restartBtn');
        const cameraPlaceholder = document.getElementById('cameraPlaceholder');
        
        // Daftar skor yang elegan
        const scores = [
            "100%",
            "1000%", 
            "∞",
            "1.000.000%",
            "Tak Terhingga",
            "100.000%",
            "Selalu Bertambah",
            "Tak Terbatas"
        ];
        
        // Daftar pesan yang minimalis
        const messages = [
            "Cinta yang tumbuh setiap hari",
            "Lebih dari kata-kata bisa ungkapkan",
            "Selalu ada dan akan terus ada",
            "Tak perlu diukur, sudah pasti sempurna",
            "Dalam setiap detik, dalam setiap napas",
            "Seperti langit yang tak bertepi",
            "Tak pernah berkurang, selalu bertambah",
            "Abadi dalam setiap momen bersama"
        ];
        
        // Inisialisasi kamera
        function initCamera() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: 'user',
                        width: { ideal: 500 },
                        height: { ideal: 500 }
                    } 
                })
                .then(function(stream) {
                    video.srcObject = stream;
                    cameraPlaceholder.style.display = 'none';
                    video.style.display = 'block';
                })
                .catch(function(error) {
                    console.log("Kamera tidak tersedia:", error);
                    cameraPlaceholder.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L6.59 6.59m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                        </svg>
                        <span>Kamera tidak tersedia</span>
                    `;
                });
            }
        }
        
        // Tangkap foto
        captureBtn.addEventListener('click', function() {
            // Set ukuran canvas
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Gambar frame ke canvas
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Konversi ke data URL
            const imageData = canvas.toDataURL('image/jpeg', 0.8);
            photo.src = imageData;
            
            // Pilih skor dan pesan random
            const randomScoreIndex = Math.floor(Math.random() * scores.length);
            const randomMessageIndex = Math.floor(Math.random() * messages.length);
            
            // Tampilkan hasil dengan animasi
            cameraContainer.style.display = 'none';
            resultContainer.style.display = 'block';
            
            // Animasi skor
            animateScoreChange(scores[randomScoreIndex]);
            
            // Set pesan
            loveMessage.textContent = messages[randomMessageIndex];
        });
        
        // Animasi perubahan skor
        function animateScoreChange(newScore) {
            let currentNumber = 0;
            const targetNumber = 100; // Animasikan ke 100 dulu
            const duration = 800;
            const steps = 20;
            const stepDuration = duration / steps;
            const increment = targetNumber / steps;
            
            let step = 0;
            const timer = setInterval(() => {
                step++;
                currentNumber = Math.min(Math.floor(increment * step), targetNumber);
                loveScore.textContent = currentNumber + '%';
                
                if (step >= steps) {
                    clearInterval(timer);
                    // Setelah animasi selesai, tampilkan skor sebenarnya
                    setTimeout(() => {
                        loveScore.textContent = newScore;
                    }, 200);
                }
            }, stepDuration);
        }
        
        // Tombol restart
        restartBtn.addEventListener('click', function() {
            resultContainer.style.display = 'none';
            cameraContainer.style.display = 'block';
            
            // Scroll ke atas dengan smooth
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // Inisialisasi saat halaman dimuat
        window.addEventListener('load', function() {
            initCamera();
        });
        
        // Handle resize window
        window.addEventListener('resize', function() {
            // Pastikan rasio video tetap konsisten
            if (video.videoWidth > 0) {
                const videoWrapper = document.querySelector('.video-wrapper');
                const aspectRatio = video.videoHeight / video.videoWidth;
                videoWrapper.style.height = (videoWrapper.offsetWidth * aspectRatio) + 'px';
            }
        });
    </script>
</body>
</html>